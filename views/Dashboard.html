<?php 

?>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Web Builder - Admin</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="css/line-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="css/simple-line-icons.css"/>
<link rel="stylesheet" type="text/css" href="css/animate.css"/>
<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<link rel="stylesheet" type="text/css" href="css/owl.carousel.css"/>
<link rel="stylesheet" type="text/css" href="css/owl.theme.css"/>
<link rel="stylesheet" type="text/css" href="css/owl.transitions.css"/>
<link rel="stylesheet" type="text/css" href="css/alert.css">
<link href="css/croppie.css" rel="stylesheet" type="text/css">
<link href="css/icons.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/croppie.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<link href='https://fonts.googleapis.com/css?family=Work+Sans:400,100,200,300,500,600,800,900' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Oleo+Script+Swash+Caps:400,700' rel='stylesheet' type='text/css'>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<script>
	function openNavedit() {
		
		document.getElementById("editprofilecv").style.width = "90%";
		$('#mymodal-bg').fadeIn('slow');
	}
		
	function closeNavedit() {
		document.getElementById("editprofilecv").style.width = "0";
		$('#mymodal-bg').fadeOut('slow');
	}

	 function load_preview() {
		document.getElementById('preview').innerHTML='<object type="text/html" data="site-preview" style="width:100%; height:100vh !important; height:-moz-available; height: -webkit-fill-available; height:fill-available"></object>';
	}

	function openSmallDialog() {
			document.getElementById("editprofilecv").style.width = "0";
			//$('#mymodal-bg').fadeIn('slow');
			$('#small-dialog-images').fadeIn('slow');
			document.querySelector('#small-dialog-images').innerHTML = `<div id="close-croppie" style="width:fit-content"><i class="icon2x fa fa-trash" style="color:coral; margin-top:20px; margin-right: 20px" ></i></div>
			
			<div class="uploaded_border"></div>	
			<div id="uploaded_image">
				
				<!-- Demo of image after it has been uploaded-->
				<div id="image_demo" style="width:250px;height:250px; margin:0 auto; display:none;"></div>
			
			</div>

			
			
			<div class="croppie-Btns">
				<div class="var_input" style="display:none;"><input type="text" placeholder="https://www.example.com" name="var_input" data-worklink="" /></div>
				<div class="upload-Btn" style=""><div class="toggleSave"><label for="upload_image"><i class=" icon-sli-camera icon1-5x text-lightened-blue" style=""></i></label></div><input name="upload_image" style="display:none" type="file" accept="image/*" id="upload_image"></div>
				<!-- Crop icon used to crop image after it has been loaded into the demo-->
	
				
			</div>`;
			
		
		}

	function openSmallDialogText(classVar) {
			document.getElementById("editprofilecv").style.width = "0";
			
			if (classVar == 'Testimonial') {
				apiDir = 'testimonials';
			}

			$('#small-dialog-text').fadeIn('slow');
			$.ajax({
						
			type:"GET",
			cache:false,
			url:"api/"+apiDir+"",
			processData:false,
			contentType:"application/json",
			data:  '',
			success: function(r) {
								    
			r = JSON.parse(r)
			if (classVar == 'Testimonial') {
				textValue = r.testimonial;
			}
			//console.log(r)
			document.querySelector('#small-dialog-images').innerHTML = `
				<h3 style="position:relative; margin-left:30px;margin-top:25px">Edit ${classVar}</h3>
				
				<div style="margin:10px, auto; display: block; position:relative; padding:0 20px;"><span style="text-align:center; font-size:14px;">${textValue}</span></div>

			
			
				<div class="croppie-Btns">
					<!--<div class="var_input" style="display:none;"><input type="text" placeholder="https://www.example.com" name="var_input" data-worklink="" /></div>-->
					<div class="upload-Btn textDialog" style=""><div class="toggleSave"><button name="saveText" id="saveText" class="saveText" type="submit"><i class=" icon-sli-save icon1-5x text-lightened-blue" style=""></i> Save</button></div><input name="upload_image" style="display:none" type="file" accept="image/*" id="upload_image"></div>
				
	
				
				</div>`;
			setTimeout(function() {
				$('.textDialog').addClass('cms_edit'+classVar+'')
			},500)
			
			},
			error: function(r) {
			console.log(r)
			}
		   });
			
		}
</script>
</head>

<body>
	<input type="checkbox" id="nav-toggle">
	<div class="sidebar">
		<div class="sidebar-brand">
			<h2><img src="./images/logo-white.png"> <span>CoralComposer</span></h2>
		</div>

		<div class="sidebar-menu">
			<ul>
				<li>
					<a href="" class="active">
						<span class="las la-igloo">
							
						</span>
						<span>Editor</span>
					</a>
				</li>
				<li>
					<a href="">
						<span class="las la-users">
							
						</span>
						<span>Themes</span>
					</a>
				</li>
				<li>
					<a href="">
						<span class="las la-clipboard-list">
							
						</span>
						<span>Drag & Drop</span>
					</a>
				</li>
				<li>
					<a href="" class="">
						<span class="las la-shopping-bag">
							
						</span>
						<span>Orders</span>
					</a>
				</li>
				<li>
					<a href="">
						<span class="las la-user">
							
						</span>
						<span>Logout</span>
					</a>
				</li>
				<!--<li>
					<a href="">
						<span class="las la-user-circle">
							
						</span>
						<span>Accounts</span>
					</a>
				</li>
				<li>
					<a href="">
						<span class="las la-clipboard-list">
							
						</span>
						<span>Tasks</span>
					</a>
				</li>-->
			</ul>
		</div>

	</div>

	<div class="main-content">
		<header>
			<h2>
				<label for="nav-toggle">
					<span class="las la-bars"></span>
				</label>

				Web Builder
			</h2>

			<!--<div class="search-wrapper">
				<span class="las la-search"></span>
				<input type="search" placeholder="Search here" />
			</div>-->

			<div class="user-wrapper">
				<img src="img/2.jpg" width="40px" height="40px" alt="">
				<div>
					<h4 class="cmsHeaderName">John Doe</h4>
					<!--<small>Super admin </small>-->
				</div>
			</div>
		</header>

		<main>
			

			<div class="recent-grid" style="display:block; margin-top:2rem">
				<div class="projects"> 
				<div class="card">
					<div class="card-header">
						<h2>Site Preview</h2>
						<button onclick="load_preview()"><p class="site-btns">Refresh</p> <span class="las la-redo-alt"></span></button>
					
						<button onclick="openNavedit()"><p class="site-btns">Edit</p> <span class="las la-arrow-right"></span></button>
					</div>
					<div class="card-body" id="preview">
						
					</div>
				</div>
			</div>
			
		</div>
		</main>
	</div>


<!-- Right sidenav  start-->
<div id="editprofilecv" class="editcvnav editsite">
	<div class="customers">
				<div class="card">
					<div class="card-header">
						<i class="icon icon-chevron_left" id="close-checkout" style="color:#000;padding:10px;z-index: 1;" onClick="closeNavedit()"></i>
						<h3>Site Editor</h3>

						<button>Save all <span class="las la-save"></span></button>

					</div>

					<div class="card-body">
						<h3>Header</h3>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Text Logo</h4>
									<input type="text" class="cms-logo"  name="text-logo" id="cms-textlogo-mobile" data-myid="cms-textlogo-mobile" style="" placeholder="Your logo...">
									
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save cms_editlogo" data-edit="text" data-myid="cms-textlogo" id="edit_textlogo"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Image Logo</h4>
									<!--<input type="file" class="cms-logo" accept="image/*"  name="image-logo" id="cms-imagelogo" style="" placeholder="Your logo...">-->
									<div class="cms-imgUpload" style="" data-u="logo"><i class="icon icon-sli-camera" style="color:coral"></i></div>
									
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save cms_editlogo" data-edit="image" data-myid="cms-imagelogo" id="edit_imagelogo"></span>
						</div>
						</div>
						
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Main Header</h4>
									<input type="text" name="text-headerh" id="cms-headerh-mobile" id="" style="" placeholder="Your header...">
									
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Header paragraph</h4>
									<input type="text" name="text-headerp" id="cms-headerp-mobile" style="" placeholder="Short Description...">
									<!--<small>Princess of Themyscria</small>-->
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Background Image</h4>
									<!--<input type="file" class="cms-logo" accept="image/*"  name="image-logo" id="cms-imagelogo" style="" placeholder="Your logo...">-->
									<div class="cms-imgUpload" style="" data-u="background"><i class="icon icon-sli-camera" style="color:coral"></i></div>
									
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save cms_editlogo" data-edit="image" data-myid="cms-imagelogo" id="edit_imagelogo"></span>
						</div>
						</div>
						<h3>Services</h3>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>First Service</h4>
									<input type="text" name="cms-servicesh1" id="cms-servicesh1-mobile" style="" placeholder="Your services...">
									<div style="position:relative;">
										
										<textarea rows="5" cols="25" name="cms-servicesp1" id="cms-servicesp1"></textarea>
										<label for="cms-servicesp1">Description of your services...</label>
									</div>
									<!--<small>Princess of Themyscria</small>-->
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Second Service</h4>
									<input type="text" name="cms-servicesh2" id="cms-services2-mobile" style="" placeholder="Your logo...">
									<div style="position:relative;">
										
										<textarea rows="5" cols="25" name="cms-servicesp2" id="cms-servicesp2"></textarea>
										<label for="cms-servicesp2">Description of your services...</label>
									</div>
									<!--<small>Princess of Themyscria</small>-->
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Third Service</h4>
									<input type="text" name="cms-servicesh3" id="cms-services3-mobile" style="" placeholder="Your logo...">
									<div style="position:relative;">
										
										<textarea rows="5" cols="25" name="cms-servicesp1" id="cms-servicesp3"></textarea>
										<label for="cms-servicesp3">Description of your services...</label>
										
									</div>
									<!--<small>Princess of Themyscria</small>-->
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						<h3>Work</h3>
						<div class="customer">
							<div class="info">
								

								<div>
									<h4>Past Work</h4>
									<div class="flexBoxes workBoxes cms_WorkBoxes" style="position:relative">
										<div class="cms-addWork editwork" data-action="insert" data-u="work" style="" ><i class="icon icon-sli-plus" style="color:coral"></i></div>
										<!--<div class="cms-addWork workThumb" style="background:url(./img/1617569485.png)" ><div class="overlay"></div><i class="icon icon-sli-picture" style="color:white;z-index:10"></i></div>
										
										<div class="cms-addWork workThumb" style="background:url(./img/1617606991.png)" ><div class="overlay"></div><i class="icon icon-sli-picture" style="color:white;z-index:10"></i></div>-->
									</div>
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						<h3>Testimonial</h3>
						<div class="customer">
						
							<div class="info">
								

								<div>
									<div style="display:grid; grid-template-columns:1fr auto">
										<h4>Your Testimonials</h4>
										<div class="cms-addTestimonial editTestimonial" data-action="insert" style="" ><i class="icon icon-sli-plus" style="color:coral; font-size:20px;position: absolute;"></i></div>
									</div>
									<div class="flexBoxes workBoxes cms_TestimonialBoxes" style="position:relative">
										
										<div class="myTestimonial testiThumb" data-testiid="0">
											<h5>Jackie Chan</h5>
											<p>Very Good website designers, Im very impressed Im very grateful...</p>		
										</div>
										<div class="myTestimonial testiThumb" data-testiid="0">
											<h5>John Hancock</h5>
											<p>Very Good website designers, Im very impressed Im very grateful...</p>		
										</div>
										<div class="myTestimonial testiThumb" data-testiid="0">
											<h5>Bruce Wayne</h5>
											<p>Very Good website designers, Im very impressed Im very grateful...</p>		
										</div>
										
									</div>
								</div>
							</div>
						
						<div class="contact">
							
							<span class="las la-save"></span>
						</div>
						</div>
						
						
					</div>
				</div>
			
			</div>


		
</div>
<!-- Right sidenav  end -->

<!-- Modal Background start-->
<div id="mymodal-bg" class="bg-mymodal" style="display:none">
<!--**************** Start of Crop Image ****************-->
        <div class="cm-block">
		<div class="center s-11 round-edges agile_book_form cm-inner-block animate" id="small-dialog-images" style="display: none;">
			
		</div>
	</div>
<!--**************** End of Crop Image ****************-->

<!--**************** Start of Delete Image ****************-->
<div class="slide-block  center round-edges agile_book_form cm-inner-block" id="small-dialog-delete" style="z-index:100;display: none;">

</div>

<!--**************** End of Delete Image ****************-->
</div>
<!-- Modal Background end-->

<!-- Start of toast notifications-->
<div class="alert dash_b" style="margin-top:0px !important;">
	<span class="fa fa-exclamation-circle"></span> 
	<span class="msg-a">Warning: This is a warning alert!</span>
	
	<span class="close-btn-alert">
		<span class="fa fa-times"></span>
	</span>

</div>

<div class="alert-success dash_b" style="margin-top:0px !important;">
	<span class="fa fa-check-circle"></span> 
	<span class="msg-a-success">Success: You've completed this action</span>
	
	<span class="close-btn-alert-success">
		<span class="fa fa-times"></span>
	</span>

</div>
<!-- End of toast notifications-->




<script type="text/javascript" src="js/toastalert.js"></script> 
<script type="text/javascript" src="js/edit.js"></script> 
<script>
	$(document).ready(function() {
		/*$('#mymodal-bg,#close-cart').click(function() {
	
		document.getElementById("editprofilecv").style.width = "0";
		$("#mymodal-bg").fadeOut('slow');
		
		
	
		});*/
		$(document).on('click','.cms-imgUpload', function() {
			/*document.getElementById("editprofilecv").style.width = "0";
			//$('#mymodal-bg').fadeIn('slow');
			$('#small-dialog-images').fadeIn('slow');
			document.querySelector('#small-dialog-images').innerHTML = `<div id="close-croppie" style="width:fit-content"><i class="icon2x icon-sli-trash" style="color:coral; margin-top:20px; margin-right: 20px" ></i></div>
			
			<div class="uploaded_border"></div>	
			<div id="uploaded_image">
				
				<!-- Demo of image after it has been uploaded-->
				<div id="image_demo" style="width:250px;height:250px; margin:0 auto; display:none;"></div>
			
			</div>

			

			<div class="croppie-Btns">
				<div class="upload-Btn" style=""><div class="toggleSave"><label for="upload_image"><i class=" icon-sli-camera icon1-5x text-lightened-blue" style=""></i></label></div><input name="upload_image" style="display:none" type="file" accept="image/*" id="upload_image"></div>
				<!-- Crop icon used to crop image after it has been loaded into the demo-->
	
				
			</div>`;*/
			openSmallDialog()
			img_Type = $(this).attr('data-u');
			cropImage(''+img_Type+'');
			
		})

		
		mymodalBg = document.getElementById('mymodal-bg');
		mymodalBg.onclick = function(bgEvent) {
			if (bgEvent.target == this) {
				
				$('#mymodal-bg').fadeOut('slow');
				$('.cm-inner-block').fadeOut('slow');
				if (document.getElementById("editprofilecv").style.width == "90%") {
					document.getElementById("editprofilecv").style.width = "0";
				}
			}					
	
			innerBlock = document.querySelector('.cm-inner-block');
			
			//bgEvent.mymodalBg.stopPropagation();
			//console.log(mymodalBg)
			
		//})
		}
		$.ajax({
							 
							 type: "GET",
							 cache:false,
							 url: "api/users",
							 processData: false,
							 contentType:"application/json",
							 data: '',
							 success: function(r) {
								r = JSON.parse(r)
								$('.user-wrapper').html('<img src="'+r.prof_img+'" width="40px" height="40px" alt=""><div><h4 class="cmsHeaderName">'+r.first_name+'</h4></div>')
								//$('.cmsHeaderName').html(r);
								
								load_preview()
							 },
							 error: function(r) {
									
								 	
								 	
									
									alertText = JSON.parse(r.responseText);
									
									alertString = alertText.Error;
									
									
									alertFunction("warning",'Error:'+alertString+'')
									
								 }
						});
	})
</script>
</body>
</html>